<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:s="http://www.springframework.org/security/tags">
	<h:form>
		<p:panel>
			<f:facet name="header">
				<h:outputText
					value="#{msg['common.course']} #{expertCourseBean.item.name}" />
			</f:facet>
			<h:panelGrid columns="3" columnClasses="formInputTitle,formInput">
				<h:outputLabel for="editName" styleClass="nameLabel">
					<h:outputText value="#{msg['course.name']}" />
				</h:outputLabel>
				<h:inputText id="editName" value="#{expertCourseBean.item.name}"
					styleClass="nameInput" />
				<p:message id="growl" for="editName" />
			</h:panelGrid>
			<h:panelGrid columns="2">
				<p:commandButton action="#{expertCourseBean.save}" update="growl"
					value="#{msg['action.save']}" styleClass="inputButton">
					<f:setPropertyActionListener value="#{expertCourseBean.item}"
						target="#{expertCourseBean.item}" />
				</p:commandButton>
				<p:commandButton action="#{expertCourseBean.cancel}"
					value="#{msg['action.cancel']}" styleClass="inputButton" />
			</h:panelGrid>
			<p:accordionPanel styleClass="accordion" activeIndex="-"
				rendered="#{expertCourseBean.item.id != -1}">

				<p:tab title="${msg['menu.tasks']}">
					<p:fileUpload fileUploadListener="#{expertLabBean.importLab}"
						mode="advanced" update="labsList" sizeLimit="1000000"
						label="#{msg['action.choose']}"
						uploadLabel="#{msg['action.upload']}"
						cancelLabel="#{msg['action.cancel']}" />
					<p:dataTable width="100%" id="labsList" rows="20"
						rendered="#{expertCourseBean.item.id != -1}" columnClasses="col"
						value="#{expertLabBean.all}" var="lab">
						<p:column styleClass="editColumn">
							<f:facet name="header">
								<h:commandLink action="#{expertLabBean.add}">
									<f:setPropertyActionListener value="#{lab}"
										target="#{expertLabBean.item}" />
									<h:graphicImage value="/images/add.png" />
								</h:commandLink>
							</f:facet>
							<h:commandLink action="#{expertLabBean.edit}">
								<f:setPropertyActionListener value="#{lab}"
									target="#{expertLabBean.item}" />
								<h:graphicImage value="/images/edit.png" />
							</h:commandLink>
						</p:column>
						<p:column styleClass="editColumn">
							<ui:remove>
								<f:facet name="header">
									<h:commandLink reRender="importLab"
										oncomplete="Richfaces.showModalPanel('importLab',{top:200});">
										<h:graphicImage value="/images/import.jpg" />
									</h:commandLink>
								</f:facet>
							</ui:remove>
							<h:commandLink action="#{expertLabBean.delete}" update="labsList">
								<f:setPropertyActionListener value="#{lab}"
									target="#{expertLabBean.item}" />
								<h:graphicImage value="/images/delete.png" />
							</h:commandLink>
						</p:column>
						<p:column sortBy="#{lab.name}">
							<f:facet name="header">
								<h:outputText styleClass="headerText" value="#{msg['lab.name']}" />
							</f:facet>
							<h:commandLink action="#{expertLabBean.edit}"
								styleClass="hiddenLink">
								<f:setPropertyActionListener value="#{lab}"
									target="#{expertLabBean.item}" />
								<h:outputText id="name" value="#{lab.name}" />
							</h:commandLink>
						</p:column>
					</p:dataTable>
				</p:tab>

				<p:tab title="${msg['menu.lectures']}">
					<p:fileUpload
						fileUploadListener="#{expertLectureBean.importLecture}"
						mode="advanced" update="lecturesList" sizeLimit="1000000"
						label="#{msg['action.choose']}"
						uploadLabel="#{msg['action.upload']}"
						cancelLabel="#{msg['action.cancel']}" />
					<p:dataTable width="100%" id="lecturesList" rows="20"
						rendered="#{expertCourseBean.item.id != -1}" columnClasses="col"
						value="#{expertLectureBean.all}" var="lecture">
						<p:column styleClass="editColumn">
							<f:facet name="header">
								<h:commandLink action="#{expertLectureBean.add}">
									<f:setPropertyActionListener value="#{lecture}"
										target="#{expertLectureBean.item}" />
									<h:graphicImage value="/images/add.png" />
								</h:commandLink>
							</f:facet>
							<h:commandLink action="#{expertLectureBean.edit}">
								<f:setPropertyActionListener value="#{lecture}"
									target="#{expertLectureBean.item}" />
								<h:graphicImage value="/images/edit.png" />
							</h:commandLink>
						</p:column>
						<p:column styleClass="editColumn">
							<ui:remove>
								<f:facet name="header">
									<h:commandLink reRender="importLecture"
										oncomplete="Richfaces.showModalPanel('importLecture',{top:200});">
										<h:graphicImage value="/images/import.jpg" />
									</h:commandLink>
								</f:facet>
							</ui:remove>
							<h:commandLink action="#{expertLectureBean.delete}"
								update="lecturesList">
								<f:setPropertyActionListener value="#{lecture}"
									target="#{expertLectureBean.item}" />
								<h:graphicImage value="/images/delete.png" />
							</h:commandLink>
						</p:column>
						<p:column sortBy="#{lecture.name}">
							<f:facet name="header">
								<h:outputText styleClass="headerText"
									value="#{msg['lecture.name']}" />
							</f:facet>
							<h:commandLink action="#{expertLectureBean.edit}"
								styleClass="hiddenLink">
								<f:setPropertyActionListener value="#{lecture}"
									target="#{expertLectureBean.item}" />
								<h:outputText id="name" value="#{lecture.name}" />
							</h:commandLink>
						</p:column>
					</p:dataTable>
				</p:tab>

				<p:tab title="${msg['menu.files']}">
					<p:fileUpload fileUploadListener="#{expertFileBean.upload}"
						mode="advanced" update="filesList" label="#{msg['action.choose']}"
						uploadLabel="#{msg['action.upload']}"
						cancelLabel="#{msg['action.cancel']}" />
					<p:dataTable width="100%" id="filesList" rows="20"
						rendered="#{expertCourseBean.item.id != -1}" columnClasses="col"
						value="#{expertFileBean.all}" var="file">
						<p:column styleClass="editColumn">
							<ui:remove>
								<f:facet name="header">
									<h:commandLink reRender="upload"
										oncomplete="Richfaces.showModalPanel('upload',{top:200});">
										<h:graphicImage value="/images/import.jpg" />
									</h:commandLink>
								</f:facet>
							</ui:remove>
							<h:commandLink action="#{expertFileBean.delete}"
								update="filesList">
								<f:setPropertyActionListener value="#{file}"
									target="#{expertFileBean.item}" />
								<h:graphicImage value="/images/delete.png" />
							</h:commandLink>
						</p:column>
						<p:column sortBy="#{file.name}">
							<f:facet name="header">
								<h:outputText styleClass="headerText"
									value="#{msg['file.name']}" />
							</f:facet>
							<h:commandLink action="#{expertFileBean.download}"
								update="filesList">
								<f:setPropertyActionListener target="#{expertFileBean.item}"
									value="#{file}" />
								<h:outputText id="name" value="#{file.name}" />
							</h:commandLink>
						</p:column>
					</p:dataTable>
				</p:tab>
			</p:accordionPanel>
		</p:panel>
	</h:form>
</ui:composition>
